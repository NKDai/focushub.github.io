<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Focus Hub</title>
  <style>
    * { box-sizing: border-box; font-family: system-ui, sans-serif }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      background: linear-gradient(120deg, #667eea, #764ba2, #6dd5ed);
      background-size: 300% 300%;
      animation: wave 12s ease-in-out infinite;
      transition: background 0.6s ease
    }

    @keyframes wave {
      0% { background-position: 0% 50% }
      50% { background-position: 100% 50% }
      100% { background-position: 0% 50% }
    }

    /* ===== THEME BUTTONS ===== */
    .theme-buttons {
      position: fixed;
      top: 16px;
      left: 16px;
      display: flex;
      gap: 8px;
      z-index: 999
    }

    .theme-btn {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3)
    }

    .theme-1 {
      background: linear-gradient(135deg, #667eea, #00c6ff)
    }

    .theme-2 {
      background: linear-gradient(135deg, #18A5A7, #B6C0C5)
    }

    .theme-3 {
      background: linear-gradient(135deg, #43e97b, #f7971e)
    }

    /* ===== CARD ===== */
    .card {
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 32px;
      width: 100%;
      max-width: 440px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3)
    }

    h1 { margin: 0 0 8px; font-size: 28px }
    p { opacity: 0.9; margin-bottom: 20px }

    .buttons, .pomodoro-buttons {
      display: grid;
      gap: 10px;
      margin-bottom: 20px
    }

    button {
      border: none;
      border-radius: 14px;
      padding: 14px;
      font-size: 15px;
      cursor: pointer;
      background: linear-gradient(135deg, #00c6ff, #0072ff);
      color: #fff;
      position: relative;
      overflow: hidden;
      transition: transform 0.15s ease, box-shadow 0.15s ease
    }

    button::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,0.6), transparent);
      transition: left 0.5s ease
    }

    button:hover::after {
      left: 100%
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 18px rgba(255,255,255,0.35)
    }

    button.secondary {
      background: linear-gradient(135deg, #f7971e, #ffd200);
      color: #222
    }

    button.control {
      background: linear-gradient(135deg, #43e97b, #38f9d7);
      color: #123
    }

    .timer {
      font-size: 38px;
      font-weight: 600;
      margin: 12px 0
    }

    .status { opacity: 0.85; margin-bottom: 8px }
    footer { font-size: 13px; opacity: 0.7 }
  </style>
</head>
<body>

  <!-- THEME BUTTONS -->
  <div class="theme-buttons">
    <button class="theme-btn theme-1" onclick="setTheme(1)"></button>
    <button class="theme-btn theme-2" onclick="setTheme(2)"></button>
    <button class="theme-btn theme-3" onclick="setTheme(3)"></button>
  </div>

  <div class="card">
    <h1>Tập trung & Hành động</h1>
    <p>Một phiên tập trung đúng cách còn giá trị hơn nhiều giờ xao nhãng.</p>

    <div class="buttons">
      <button onclick="openZalo()">Mở Zalo</button>
      <button class="secondary" onclick="openChatGPT()">Mở ChatGPT</button>
    </div>

    <div class="status" id="status">Sẵn sàng tập trung</div>
    <div class="timer" id="timer">00:00</div>

    <div class="pomodoro-buttons">
      <button onclick="startSession(25)">Pomodoro 25 phút</button>
      <button onclick="startSession(45)">Pomodoro 45 phút</button>
      <button onclick="startSession(60)">Pomodoro 60 phút</button>
    </div>

    <button class="control" onclick="togglePause()">Tạm dừng / Tiếp tục</button>

    <p>Số Pomodoro đã hoàn thành: <strong id="count">0</strong></p>
    <footer>Giữ nhịp. Giữ tập trung.</footer>
  </div>

  <audio id="sound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

  <script>
    function setTheme(id) {
      const body = document.body
      if (id === 1)
        body.style.background = 'linear-gradient(120deg, #667eea, #00c6ff, #764ba2)'
      if (id === 2)
        body.style.background = 'linear-gradient(120deg, #18A5A7, #B6C0C5, #18A5A7)'
      if (id === 3)
        body.style.background = 'linear-gradient(120deg, #43e97b, #f7971e, #38f9d7)'
      body.style.backgroundSize = '300% 300%'
    }

    function openZalo() {
      window.open('https://chat.zalo.me', '_blank')
    }

    function openChatGPT() {
      const prompt = encodeURIComponent('Hãy giúp tôi tập trung làm việc trong 25 phút tới, chia nhỏ nhiệm vụ và động viên tôi')
      window.open('https://chat.openai.com/?prompt=' + prompt, '_blank')
    }

    let endTime = 0
    let interval = null
    let paused = false
    let pauseTime = 0
    let mode = 'idle'
    let pomodoroCount = 0
    let currentWorkMinutes = 0

    const timerEl = document.getElementById('timer')
    const statusEl = document.getElementById('status')
    const countEl = document.getElementById('count')
    const sound = document.getElementById('sound')

    function updateTimer(seconds) {
      const m = String(Math.floor(seconds / 60)).padStart(2, '0')
      const s = String(seconds % 60).padStart(2, '0')
      timerEl.textContent = `${m}:${s}`
    }

    function startSession(minutes) {
      clearInterval(interval)
      currentWorkMinutes = minutes
      paused = false
      mode = 'work'
      endTime = Date.now() + minutes * 60 * 1000
      statusEl.textContent = `Đang tập trung ${minutes} phút`
      runTimer()
    }

    function startBreak() {
      const breakMinutes = currentWorkMinutes === 25 ? 5 : currentWorkMinutes === 45 ? 10 : 15
      mode = 'break'
      endTime = Date.now() + breakMinutes * 60 * 1000
      statusEl.textContent = `Nghỉ giải lao ${breakMinutes} phút`
      runTimer()
    }

    function runTimer() {
      clearInterval(interval)
      interval = setInterval(() => {
        if (paused) return

        const remaining = Math.max(0, Math.floor((endTime - Date.now()) / 1000))
        updateTimer(remaining)

        if (remaining === 0) {
          clearInterval(interval)
          sound.play()

          if (mode === 'work') startBreak()
          else {
            pomodoroCount++
            countEl.textContent = pomodoroCount
            startSession(currentWorkMinutes)
          }
        }
      }, 1000)
    }

    function togglePause() {
      if (!paused) {
        paused = true
        pauseTime = Date.now()
        statusEl.textContent = 'Đã tạm dừng'
      } else {
        paused = false
        endTime += Date.now() - pauseTime
        statusEl.textContent = mode === 'break' ? 'Đang nghỉ' : 'Đang tập trung'
      }
    }
  </script>
</body>
</html>
